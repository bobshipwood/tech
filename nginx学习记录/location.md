| 名称                     | 示例                                  | 备注 |
| ------------------------ | ------------------------------------- | -------------------------- |
| 精确匹配             | location  =  /path {    // 配置指令 } | 这种匹配规则要求请求的URL路径与location块的路径完全相等，包括斜杠（/）。只有当请求的URL路径与指定的路径完全匹配时，该location块才会被匹配。（一旦匹配成功，不会继续往下寻找） |
| 带修饰符的正则表达式匹配     | location   ^~   /path/  {    // 配置指令 } | 如果请求的URL路径与该location块的路径前缀匹配，那么将立即停止继续寻找，直接选择该location块进行处理。（^ 表示 “非”，~ 表示 “正则”，意思是：不要继续匹配正则） |
| 正则表达式匹配           | location  ~*   .ext$ {    // 配置指令 } | 使用正则表达式来匹配请求的URL路径。`~`表示区分大小写匹配，`~*`表示不区分大小写匹配。如果有多个正则匹配，则nginx会选择最适合的一个来匹配 |
| 前缀匹配 | location    /path/ {    // 配置指令 }      | 前缀匹配是按照最长匹配原则进行的。如果有多个location块的前缀匹配路径都符合请求的URL路径，将会选择匹配路径最长的location块来处理请求。 |

匹配优先级

1. 精确匹配（Exact Match）：精确匹配的优先级最高。一旦找到，将停止继续寻找其他匹配项。

2. 带修饰符的正则匹配：带有`^~`修饰符的正则匹配的优先级次之。如果请求的URL路径与带修饰符的正则匹配的路径前缀匹配，那么该location块会被立即匹配，并停止继续寻找其他项目。

3. 正则表达式匹配：如果前面的匹配规则不适用或没有匹配成功，nginx将尝试使用正则表达式匹配来选择适用的location块，如果url路径匹配出2个或多个

   正则匹配的话，则nginx会选择最适合的一个来匹配（实测根据配置文件来定，最新匹配到的就直接进入这个location）。

4. 前缀匹配：如果前面的匹配规则都不适用或没有匹配成功，最后将使用前缀匹配。根据最长匹配原则，选择路径最长的前缀匹配的location块进行处理。



总结：
**准确的优先级顺序是：精确匹配（一旦匹配不会向下寻找） > 带修饰符的正则匹配 （一旦匹配，不会向下寻找）> 正则表达式匹配 > 前缀匹配。**
